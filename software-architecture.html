<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Sep 5, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Maven - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20130905" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://jboss.org/" id="bannerLeft">
                                                <img src="images/jbosscommunity_logo_stack_white.png" alt="ToDO" />
                </a>
                          <div id="bannerRight">
                                                <img src="images/vm-truckloader-logo.png" alt="VM Truck Loader logo" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-09-05</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                <h5>VM Truckloader</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="dev-set-up.html" title="Developer Environment Setup">Developer Environment Setup</a>
            </li>
                  <li class="none">
            <strong>Software Architecture</strong>
          </li>
                  <li class="none">
                          <a href="cli.html" title="Usage">Usage</a>
            </li>
                  <li class="none">
                          <a href="roadmap.html" title="Road Map">Road Map</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                              <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Software Architecture</h1><p><i>This section of the documentation presents the <b>internals</b> details of this tool. The information here are not required to run the software, it is mostly aimed at developer who wishes to contribute to this project.</i></p><div class="section"><h2>Prerequisite<a name="Prerequisite"></a></h2><p>Being a Java application, modifying the application requires some decent knowledge of Java programming, along with a good understanding of the Object Oriented Programming. Especially, the principe of <a class="externalLink" href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsability</a> which has been driving the code source organisation.</p><p>On top of that a fair knowledge of dependency injection with the Weld framework will come handy to figure out how the main service object, MachineService, is being created:</p>
<ul>
  <li><a class="externalLink" href="http://www.oracle.com/technetwork/articles/java/cdi-javaee-bien-225152.html">Contexts and Dependency Injection in Java EE 6</a> (JSR299, JSR330)</li>
</ul><p>Of course, as this tool directly interacts with vCenter through the Managed Object API, a fair understanding of its logic is required. Also, the API is accessed through the <a class="externalLink" href="http://vijava.sourceforge.net/">VI Java API</a>, and for any question relating to it, one should refer to this project.</p></div><div class="section"><h2>Other librairies<a name="Other_librairies"></a></h2>
<ul>
  <li><p><a class="externalLink" href="http://opencsv.sourceforge.net/">OpenCSV</a>, an Open Source librairie dedicated to CSV parsing. It is only use to process the input file, and update - if needed, afterward.</p></li>
  <li><p><a class="externalLink" href="http://jcommander.org">JCommander</a>, an Open Source framework to facilitate the creation of consistent and resilient command line interface.</p></li>
  <li><p><a class="externalLink" href="http://projectlombok.org/">Project Lombok</a>, a code generation tool, based on annotation which reduce greatly the amount of boiler plate coding required by Java.</p></li>
</ul></div><div class="section"><h2>General Architecture<a name="General_Architecture"></a></h2><p>The core service of this tool has been designed following the <a class="externalLink" href="http://en.wikipedia.org/wiki/Template_method_pattern">template pattern</a>. Indeed, inside the VMWareMachineService, each operation is a Callback, and therefore this central class merely takes care of instantiating the appropriate implementation to fulfill the requested actions.</p><p>Obviously, some logic has been regroup into an AbstractVMWareActionCallback - but not that much, and most of each action code is rather straight forward.</p><p>When launch, the tool will first analyse the arguments and creates, thanks to JCommander, an object holding all the values passed to the command line - if legit. JCommander will also do some basic validation on the values.</p><p>Once this is done, the tool will try to load the CSV data - if a CSV file was passed to it, and then execute, for each line of the CSV file, the requested action. (A switch statement on the Action enum is taking care of that).</p><p>Then, the MachineService approriate method - matching the requested action, is requested. For most action, the code is rather simple, except for the CREATE action, where the clone method invocation, along with potential execution of a post creation script, requires a bit more logic.</p><p>As most of the logic of this tool resides outside of vCenter - VI Java API is used to this purpose, a MockObject of the MachineService has been provided, to allow unit testing and debugging the rest of the code.</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2013.
          All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
